<!-- Loading State -->
@if (isLoading) {
  <div class="min-h-screen bg-gradient-to-br from-[#f9f3d1] to-[#f9f1b2] flex items-center justify-center">
    <div class="text-center">
      <div class="w-20 h-20 border-4 border-[#fcb046] border-t-[#212c57] rounded-full animate-spin mx-auto mb-4"></div>
      <p class="text-[#212c57] font-semibold text-lg">Chargement...</p>
    </div>
  </div>
}

<!-- Shop Details -->
@else if (shop) {
  <div class="min-h-screen bg-gradient-to-br from-[#f9f3d1] via-[#f9f1b2] to-[#e2dfc3]">
    
    <!-- Hero Header -->
    <div class="bg-gradient-to-r from-[#fcb046] via-[#fec655] to-[#e0ab3a] shadow-2xl">
      <div class="container mx-auto px-4 py-8 max-w-7xl">
        
        <!-- Back Button -->
        <a 
          routerLink="/shop-list" 
          class="inline-flex items-center gap-2 text-[#212c57] hover:text-white transition-all mb-6 font-bold text-sm bg-white/30 hover:bg-[#212c57] px-4 py-2 rounded-full backdrop-blur-sm"
        >
          <span class="text-lg">‚Üê</span> Retour aux boutiques
        </a>

        <!-- Shop Info Card -->
        <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border-2 border-[#fec655]">
          <div class="flex flex-col lg:flex-row gap-8">
            
            <!-- Left: Main Info -->
            <div class="flex-1">
              <div class="flex items-start gap-4 mb-6">
                <div class="text-6xl">üè™</div>
                <div class="flex-1">
                  <h1 class="text-4xl lg:text-5xl font-extrabold text-[#212c57] mb-3">
                    {{ shop.nom }}
                  </h1>
                  <span class="inline-block bg-gradient-to-r from-[#47a275] to-[#63bd8f] text-white px-5 py-2 rounded-full font-bold text-sm shadow-lg">
                    {{ shop.categorie }}
                  </span>
                </div>
              </div>

              <!-- Contact Details -->
              <div class="space-y-4 mt-6">
                
                <!-- Address -->
                <div class="flex items-start gap-4 p-4 bg-gradient-to-r from-[#ace0e4] to-[#91c4c8] rounded-2xl shadow-md hover:shadow-xl transition-all group cursor-pointer" (click)="openMap()">
                  <div class="text-3xl group-hover:scale-110 transition-transform">üìç</div>
                  <div class="flex-1">
                    <p class="text-xs font-semibold text-[#212c57] opacity-70 uppercase mb-1">Adresse</p>
                    <p class="text-base font-bold text-[#212c57]">{{ shop.adresse }}</p>
                    <p class="text-xs text-[#212c57] mt-1 opacity-60">Cliquez pour ouvrir dans Maps</p>
                  </div>
                  <span class="text-2xl group-hover:translate-x-1 transition-transform">‚Üí</span>
                </div>

                <!-- Phone -->
                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-[#98e256] to-[#63bd8f] rounded-2xl shadow-md hover:shadow-xl transition-all group cursor-pointer" (click)="callShop()">
                  <div class="text-3xl group-hover:scale-110 transition-transform">üìû</div>
                  <div class="flex-1">
                    <p class="text-xs font-semibold text-[#212c57] opacity-70 uppercase mb-1">T√©l√©phone</p>
                    <p class="text-lg font-bold text-[#212c57]">{{ shop.telephone }}</p>
                  </div>
                  <span class="text-2xl group-hover:scale-110 transition-transform">‚òéÔ∏è</span>
                </div>

              </div>
            </div>

            <!-- Right: Stats & Actions -->
            <div class="lg:w-80 space-y-4">
              
              <!-- Products Count Card -->
              <div class="bg-gradient-to-br from-[#fcb046] to-[#ec945a] p-6 rounded-2xl shadow-xl text-center transform hover:scale-105 transition-all">
                <div class="text-5xl mb-3">üì¶</div>
                <p class="text-5xl font-extrabold text-white mb-2">{{ shop.produits?.length || 0 }}</p>
                <p class="text-sm font-bold text-[#212c57] uppercase tracking-wide">
                  Produit{{ (shop.produits?.length || 0) !== 1 ? 's' : '' }} Disponible{{ (shop.produits?.length || 0) !== 1 ? 's' : '' }}
                </p>
              </div>

              <!-- Quick Actions -->
              <div class="space-y-3">
                <button 
                  (click)="callShop()"
                  class="w-full bg-gradient-to-r from-[#47a275] to-[#29875c] text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-2xl hover:scale-105 transition-all flex items-center justify-center gap-3"
                >
                  <span class="text-2xl">üìû</span>
                  <span>Appeler la boutique</span>
                </button>
                
                <button 
                  (click)="openMap()"
                  class="w-full bg-gradient-to-r from-[#4bc5ce] to-[#38cddd] text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-2xl hover:scale-105 transition-all flex items-center justify-center gap-3"
                >
                  <span class="text-2xl">üó∫Ô∏è</span>
                  <span>Voir sur la carte</span>
                </button>
              </div>

            </div>

          </div>
        </div>

      </div>
    </div>

    <!-- Products Section -->
    <div class="container mx-auto px-4 py-12 max-w-7xl">
      <app-product-byshop-list [boutiqueId]="shopId"></app-product-byshop-list>
    </div>

  </div>
}

<!-- Error State -->
@else {
  <div class="min-h-screen bg-gradient-to-br from-[#f9f3d1] to-[#f9f1b2] flex items-center justify-center">
    <div class="text-center max-w-md mx-auto px-4">
      <div class="text-8xl mb-6">üòï</div>
      <h2 class="text-3xl font-bold text-[#212c57] mb-4">Boutique introuvable</h2>
      <p class="text-gray-600 mb-8">D√©sol√©, nous n'avons pas pu trouver cette boutique.</p>
      <a 
        routerLink="/shop-list" 
        class="inline-block bg-gradient-to-r from-[#fcb046] to-[#fec655] text-white font-bold px-8 py-4 rounded-xl shadow-lg hover:shadow-2xl hover:scale-105 transition-all"
      >
        ‚Üê Retour aux boutiques
      </a>
    </div>
  </div>
}
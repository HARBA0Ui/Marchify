<div class="mb-4 bg-white/80 rounded p-3 border-t-4 border-[#386641]">
  <div class="flex flex-wrap gap-2 text-xs">
    
 
<div class="relative flex-1 min-w-[120px]">
  <input
    type="text"
    [(ngModel)]="searchQuery"
    (input)="applyFilters()"
    placeholder="Rechercher..."
    class="w-full border border-gray-300 rounded-lg px-4 py-2 bg-white text-sm text-gray-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#F97A00] transition-all placeholder-gray-400"
  />
  
  <div class="absolute inset-y-0 right-3 flex items-center text-gray-400 pointer-events-none">
    <i class="fas fa-search"></i>
  </div>
</div>


<div class="relative inline-block w-full sm:w-auto mb-2">
  <select
    [(ngModel)]="deliveryFilter"
    (change)="applyFilters()"
    class="w-full sm:w-auto appearance-none border border-gray-300 rounded-lg px-4 py-2 bg-white text-sm text-gray-700 shadow-sm hover:border-[#386641] focus:outline-none focus:ring-2 focus:ring-[#F97A00] transition-all"
  >
    <option value="all">Tous</option>
    <option value="livrable">Livrables</option>
    <option value="non-livrable">Retrait</option>
  </select>

  <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400">
    <i class="fas fa-chevron-down"></i>
  </div>
</div>


<div class="relative inline-block w-full sm:w-auto mb-2">
  <select
    [(ngModel)]="sortBy"
    (change)="applySorting()"
    class="w-full sm:w-auto appearance-none border border-gray-300 rounded-lg px-4 py-2 bg-white text-sm text-gray-700 shadow-sm hover:border-[#386641] focus:outline-none focus:ring-2 focus:ring-[#F97A00] transition-all"
  >
    <option value="name">Nom</option>
    <option value="price-asc">Prix ↑</option>
    <option value="price-desc">Prix ↓</option>
  </select>
  <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400">
    <i class="fas fa-chevron-down"></i>
  </div>
</div>


    <button (click)="clearFilters()" class="bg-[#F97A00] text-white rounded px-3 py-1.5 font-medium">
      Réinitialiser
    </button>
  </div>
</div>

@if (isLoading) {
  <div class="text-center py-10">
    <div class="inline-block w-10 h-10 border-4 border-gray-300 border-t-[#F97A00] rounded-full animate-spin"></div>
    <p class="mt-2 text-[#386641] text-xs">Chargement...</p>
  </div>
} @else if (filteredProducts.length === 0) {
  <div class="text-center py-10 bg-white/80 rounded border-t-4 border-gray-300">
    <p class="text-sm font-semibold text-[#386641] mb-1">Aucun produit</p>
    <p class="text-xs text-gray-600">
      @if (searchQuery || deliveryFilter !== 'all') {
        Modifiez vos filtres
      } @else {
        Aucun produit disponible
      }
    </p>
  </div>
} @else {
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-3">
    @for (product of filteredProducts; track product.id) {
      <app-product-card
        [product]="product"
        (addToCartEvent)="onAddToCart($event)"
        (viewDetailsEvent)="onViewDetails($event)"
      ></app-product-card>
    }
  </div>
}